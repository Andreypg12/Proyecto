/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JInternalFrame.java to edit this template
 */
package UI;

import BLL.*;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultComboBoxModel;
import javax.swing.DefaultListModel;
import javax.swing.JOptionPane;
/**
 *
 * @author andre
 */
public class JInternalProcesoCita extends javax.swing.JInternalFrame {

    DefaultListModel<Dueño> modeloListaDuenos = new DefaultListModel<>();
    DefaultListModel<Paciente> modeloListaPacientes = new DefaultListModel<>();
    List<Raza> arrayRazasPerros;
    List<Raza> arrayRazasGatos;
    List<Dueño> arrayDueños;
    Dueño dueno;
    Paciente paciente;
    
    /**
     * 
     * Creates new form JInternalProcesoCIta
     */
    public JInternalProcesoCita() {
        initComponents();
        jListDueno.setModel(modeloListaDuenos);
        jListPaciente.setModel(modeloListaPacientes);
        actualizararrayDuenos();
        modeloListaDuenos.addAll(arrayDueños);
        jCmbSexo.setModel(new DefaultComboBoxModel<>(Sexo.values()));
        try {
            jCmbEspecie.setModel(new DefaultComboBoxModel(Especie.consultarEspecies().toArray()));
        } catch (Exception ex) {
            Logger.getLogger(JInternalProcesoCita.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        CrearListaRazas();
        jCmbRaza.setModel(new DefaultComboBoxModel(arrayRazasPerros.toArray()));
    }
    
    private void actualizararrayDuenos(){
        try {
            arrayDueños = Dueño.cosultarDueños();
        } catch (Exception ex) {
            Logger.getLogger(JInternalProcesoCita.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    
    public void CrearListaRazas(){
        try {
            arrayRazasPerros = new ArrayList<>();
            arrayRazasGatos = new ArrayList<>();
            for (Raza raza : Raza.consultarRazas()) {
                if (raza.getEspecieAQuePertenece().getId_especie() == 1) {
                    arrayRazasPerros.add(raza);
                }
                else if (raza.getEspecieAQuePertenece().getId_especie() == 2) {
                    arrayRazasGatos.add(raza);
                }
            }
        } catch (Exception ex) {
            Logger.getLogger(JInternalMantenimientoEspeciesRazas.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTPlProcesoCita = new javax.swing.JTabbedPane();
        jPanelPaciente = new PanelConFondo("/Imagenes/FondoCitas.png");
        jPanelDueno = new javax.swing.JPanel();
        jLblNombreDueno = new javax.swing.JLabel();
        jTxtNombreDueno = new javax.swing.JTextField();
        jLblDireccion = new javax.swing.JLabel();
        jTxtDireccionDueno = new javax.swing.JTextField();
        jLblNumeroTelefono = new javax.swing.JLabel();
        jFTxtNumeroTelefono = new javax.swing.JFormattedTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jListDueno = new javax.swing.JList<>();
        jLblDuenos = new javax.swing.JLabel();
        jBtnElegirDueno = new javax.swing.JButton();
        jBtnAnadirNuevoDueno = new javax.swing.JButton();
        jFTxtNumeroCedula = new javax.swing.JFormattedTextField();
        jLblCedula = new javax.swing.JLabel();
        jBtnLimpiarDueno = new javax.swing.JButton();
        jPanelDatosPaciente = new javax.swing.JPanel();
        jLblNombrePaciente = new javax.swing.JLabel();
        jTxtNombrePaciente = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        jListPaciente = new javax.swing.JList<>();
        jLblPacientes = new javax.swing.JLabel();
        jBtnElegirPaciente = new javax.swing.JButton();
        jBtnAnadirNuevoPaciente = new javax.swing.JButton();
        jLblSexoPaciente = new javax.swing.JLabel();
        jLblEdad = new javax.swing.JLabel();
        jLblEspecie = new javax.swing.JLabel();
        jCmbEspecie = new javax.swing.JComboBox<>();
        jCmbSexo = new javax.swing.JComboBox<>();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jSprEdad = new javax.swing.JSpinner();
        jLblEdad1 = new javax.swing.JLabel();
        jLblEspecie1 = new javax.swing.JLabel();
        jCmbRaza = new javax.swing.JComboBox<>();
        jBtnLimpiarPaciente = new javax.swing.JButton();
        jLblDuenoElegido = new javax.swing.JLabel();
        jPanelCita = new PanelConFondo("/Imagenes/FondoCitas.png");
        jPanel3 = new javax.swing.JPanel();
        jSpinner1 = new javax.swing.JSpinner();

        setClosable(true);
        setTitle("Proceso de citas");
        getContentPane().setLayout(new javax.swing.BoxLayout(getContentPane(), javax.swing.BoxLayout.LINE_AXIS));

        jPanelDueno.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "Datos del dueño"));
        jPanelDueno.setOpaque(false);

        jLblNombreDueno.setText("Nombre");

        jTxtNombreDueno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtNombreDuenoActionPerformed(evt);
            }
        });

        jLblDireccion.setText("Dirección");

        jTxtDireccionDueno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtDireccionDuenoActionPerformed(evt);
            }
        });

        jLblNumeroTelefono.setText("Numero de teléfono");

        try {
            jFTxtNumeroTelefono.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("####-####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFTxtNumeroTelefono.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFTxtNumeroTelefonoActionPerformed(evt);
            }
        });

        jListDueno.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jScrollPane1.setViewportView(jListDueno);

        jLblDuenos.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblDuenos.setText("Lista de dueños");

        jBtnElegirDueno.setText("Elegir dueño seleccionado");
        jBtnElegirDueno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnElegirDuenoActionPerformed(evt);
            }
        });

        jBtnAnadirNuevoDueno.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/AgregarDueño.png"))); // NOI18N
        jBtnAnadirNuevoDueno.setText("Añadir nuevo dueño");
        jBtnAnadirNuevoDueno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnAnadirNuevoDuenoActionPerformed(evt);
            }
        });

        try {
            jFTxtNumeroCedula.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("#-####-####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFTxtNumeroCedula.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFTxtNumeroCedulaActionPerformed(evt);
            }
        });
        jFTxtNumeroCedula.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jFTxtNumeroCedulaKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jFTxtNumeroCedulaKeyTyped(evt);
            }
        });

        jLblCedula.setText("Cédula");

        jBtnLimpiarDueno.setText("Limpiar");
        jBtnLimpiarDueno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnLimpiarDuenoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanelDuenoLayout = new javax.swing.GroupLayout(jPanelDueno);
        jPanelDueno.setLayout(jPanelDuenoLayout);
        jPanelDuenoLayout.setHorizontalGroup(
            jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelDuenoLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelDuenoLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jBtnAnadirNuevoDueno, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDuenoLayout.createSequentialGroup()
                                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLblNumeroTelefono)
                                    .addComponent(jLblCedula)
                                    .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addComponent(jLblDireccion, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(jLblNombreDueno, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                                .addGap(18, 18, 18)
                                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jTxtDireccionDueno)
                                    .addComponent(jTxtNombreDueno)
                                    .addComponent(jFTxtNumeroTelefono, javax.swing.GroupLayout.PREFERRED_SIZE, 213, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jFTxtNumeroCedula, javax.swing.GroupLayout.PREFERRED_SIZE, 213, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addComponent(jLblDuenos, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDuenoLayout.createSequentialGroup()
                        .addComponent(jBtnLimpiarDueno)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jBtnElegirDueno)))
                .addContainerGap())
        );
        jPanelDuenoLayout.setVerticalGroup(
            jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelDuenoLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLblCedula, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jFTxtNumeroCedula, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jTxtNombreDueno)
                    .addComponent(jLblNombreDueno, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLblDireccion, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTxtDireccionDueno))
                .addGap(18, 18, 18)
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLblNumeroTelefono, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jFTxtNumeroTelefono, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jBtnAnadirNuevoDueno)
                .addGap(18, 18, 18)
                .addComponent(jLblDuenos)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelDuenoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBtnElegirDueno)
                    .addComponent(jBtnLimpiarDueno))
                .addContainerGap())
        );

        jPanelDatosPaciente.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "Datos del paciente"));
        jPanelDatosPaciente.setOpaque(false);

        jLblNombrePaciente.setText("Nombre");

        jListPaciente.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jScrollPane2.setViewportView(jListPaciente);

        jLblPacientes.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblPacientes.setText("Lista de pacientes por dueño");

        jBtnElegirPaciente.setText("Elegir paciente seleccionado");
        jBtnElegirPaciente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnElegirPacienteActionPerformed(evt);
            }
        });

        jBtnAnadirNuevoPaciente.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/AgregarPaciente.png"))); // NOI18N
        jBtnAnadirNuevoPaciente.setText("Añadir nuevo paciente");
        jBtnAnadirNuevoPaciente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnAnadirNuevoPacienteActionPerformed(evt);
            }
        });

        jLblSexoPaciente.setText("Sexo");

        jLblEdad.setText("Edad");

        jLblEspecie.setText("Especie");

        jCmbEspecie.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCmbEspecieActionPerformed(evt);
            }
        });

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/Perro.png"))); // NOI18N

        jLabel2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/gato.png"))); // NOI18N

        jSprEdad.setModel(new javax.swing.SpinnerNumberModel(0, 0, 300, 1));

        jLblEdad1.setText("Meses");

        jLblEspecie1.setText("Raza");

        jBtnLimpiarPaciente.setText("Limpiar");
        jBtnLimpiarPaciente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnLimpiarPacienteActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanelDatosPacienteLayout = new javax.swing.GroupLayout(jPanelDatosPaciente);
        jPanelDatosPaciente.setLayout(jPanelDatosPacienteLayout);
        jPanelDatosPacienteLayout.setHorizontalGroup(
            jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 343, Short.MAX_VALUE)
                    .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                        .addComponent(jLblPacientes, javax.swing.GroupLayout.PREFERRED_SIZE, 338, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDatosPacienteLayout.createSequentialGroup()
                        .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLblNombrePaciente, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLblEspecie)
                            .addComponent(jLblSexoPaciente)
                            .addComponent(jLblEdad)
                            .addComponent(jLblEspecie1))
                        .addGap(18, 18, 18)
                        .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                                .addComponent(jSprEdad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLblEdad1))
                            .addComponent(jCmbRaza, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDatosPacienteLayout.createSequentialGroup()
                                .addComponent(jLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jCmbEspecie, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel2))
                            .addComponent(jCmbSexo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jTxtNombrePaciente)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDatosPacienteLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jBtnAnadirNuevoPaciente))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelDatosPacienteLayout.createSequentialGroup()
                        .addComponent(jBtnLimpiarPaciente)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jBtnElegirPaciente)))
                .addContainerGap())
        );
        jPanelDatosPacienteLayout.setVerticalGroup(
            jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                        .addComponent(jLblNombrePaciente, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jLblEdad, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLblSexoPaciente, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jCmbSexo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addComponent(jLblEspecie, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(18, 18, 18)
                        .addComponent(jLblEspecie1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanelDatosPacienteLayout.createSequentialGroup()
                        .addComponent(jTxtNombrePaciente)
                        .addGap(18, 18, 18)
                        .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jSprEdad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLblEdad1, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(62, 62, 62)
                        .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel1)
                                .addComponent(jCmbEspecie, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jLabel2))
                        .addGap(18, 18, Short.MAX_VALUE)
                        .addComponent(jCmbRaza, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBtnAnadirNuevoPaciente)
                .addGap(12, 12, 12)
                .addComponent(jLblPacientes)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 160, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelDatosPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBtnElegirPaciente)
                    .addComponent(jBtnLimpiarPaciente))
                .addContainerGap())
        );

        jLblDuenoElegido.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblDuenoElegido.setText("Dueño no elegido");

        javax.swing.GroupLayout jPanelPacienteLayout = new javax.swing.GroupLayout(jPanelPaciente);
        jPanelPaciente.setLayout(jPanelPacienteLayout);
        jPanelPacienteLayout.setHorizontalGroup(
            jPanelPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelPacienteLayout.createSequentialGroup()
                .addContainerGap(227, Short.MAX_VALUE)
                .addComponent(jPanelDueno, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(jPanelPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLblDuenoElegido, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanelDatosPaciente, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(218, 218, 218))
        );
        jPanelPacienteLayout.setVerticalGroup(
            jPanelPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelPacienteLayout.createSequentialGroup()
                .addGap(51, 51, 51)
                .addComponent(jLblDuenoElegido)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelPacienteLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanelDueno, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanelDatosPaciente, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(125, Short.MAX_VALUE))
        );

        jTPlProcesoCita.addTab("Paciente", jPanelPaciente);

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "Fecha para la cita"));

        jSpinner1.setModel(new javax.swing.SpinnerDateModel());

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jSpinner1, javax.swing.GroupLayout.PREFERRED_SIZE, 191, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jSpinner1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanelCitaLayout = new javax.swing.GroupLayout(jPanelCita);
        jPanelCita.setLayout(jPanelCitaLayout);
        jPanelCitaLayout.setHorizontalGroup(
            jPanelCitaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelCitaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(969, Short.MAX_VALUE))
        );
        jPanelCitaLayout.setVerticalGroup(
            jPanelCitaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelCitaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(642, Short.MAX_VALUE))
        );

        jTPlProcesoCita.addTab("Cita", jPanelCita);

        getContentPane().add(jTPlProcesoCita);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jFTxtNumeroCedulaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jFTxtNumeroCedulaKeyTyped
        // TODO add your handling code here:
        
    }//GEN-LAST:event_jFTxtNumeroCedulaKeyTyped

    private void jBtnAnadirNuevoDuenoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnAnadirNuevoDuenoActionPerformed
        // TODO add your handling code here:
        String cedula = jFTxtNumeroCedula.getText().replace("-", "").trim();
        String nombre = jTxtNombreDueno.getText().trim();
        String direccion = jTxtDireccionDueno.getText().trim();
        String numero_telefono = jFTxtNumeroTelefono.getText().replace("-", "").trim();

        try {
            if (modeloListaDuenos.get(0).getCedula().equals(cedula)) {
                JOptionPane.showMessageDialog(null, "El Dueño solo fue elegido porque ya existe", "Dueño ya existente", JOptionPane.ERROR_MESSAGE);
                dueno = modeloListaDuenos.get(0);
                jTxtNombreDueno.setText(dueno.getNombre());
                jTxtDireccionDueno.setText(dueno.getDireccion());
                jFTxtNumeroTelefono.setText(dueno.getTelefono());
                accionesDefinirDueño();
                return;
            }
        } catch (Exception e) {
        }

        if (cedula.isBlank()) {
            JOptionPane.showMessageDialog(null, "Debes ingresar la cédula del dueño", "Espacio en blanco", JOptionPane.ERROR_MESSAGE);
        } else if (nombre.isBlank()) {
            JOptionPane.showMessageDialog(null, "Debes ingresar el nombre del dueño", "Espacio en blanco", JOptionPane.ERROR_MESSAGE);
        } else if (direccion.isBlank()) {
            JOptionPane.showMessageDialog(null, "Debes ingresar la direccion del dueño", "Espacio en blanco", JOptionPane.ERROR_MESSAGE);
        } else if (numero_telefono.isBlank()) {
            JOptionPane.showMessageDialog(null, "Debes ingresar el número de teléfono del dueño", "Espacio en blanco", JOptionPane.ERROR_MESSAGE);
        } else {

            try {
                dueno = new Dueño(cedula, nombre, direccion, numero_telefono);
                Dueño.agregar(dueno);
                actualizararrayDuenos();
                modeloListaDuenos.addAll(arrayDueños);
                accionesDefinirDueño();
                JOptionPane.showMessageDialog(null, "El dueño fue creado correctamete", "!Dueño creado¡", JOptionPane.INFORMATION_MESSAGE);
            } catch (Exception ex) {
                Logger.getLogger(JInternalProcesoCita.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }//GEN-LAST:event_jBtnAnadirNuevoDuenoActionPerformed

    private void cambiarEstadoEspaciosDueno(boolean estado){
        jTxtNombreDueno.setEditable(estado);
        jFTxtNumeroCedula.setEditable(estado);
        jTxtDireccionDueno.setEditable(estado);
        jFTxtNumeroTelefono.setEditable(estado);
        jBtnAnadirNuevoDueno.setEnabled(estado);
        jBtnElegirDueno.setEnabled(estado);
    }

    private void jFTxtNumeroCedulaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jFTxtNumeroCedulaKeyPressed

        modeloListaDuenos.clear();
        for (Dueño dueno : arrayDueños) {
            if (dueno.getCedula().contains(jFTxtNumeroCedula.getText().replace("-", "").trim())) {
                modeloListaDuenos.addElement(dueno);

            }
        }
    }//GEN-LAST:event_jFTxtNumeroCedulaKeyPressed

    private void jFTxtNumeroCedulaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFTxtNumeroCedulaActionPerformed
        // TODO add your handling code here:
        jTxtNombreDueno.requestFocus();
    }//GEN-LAST:event_jFTxtNumeroCedulaActionPerformed

    private void jTxtNombreDuenoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtNombreDuenoActionPerformed
        // TODO add your handling code here:
        jTxtDireccionDueno.requestFocus();
    }//GEN-LAST:event_jTxtNombreDuenoActionPerformed

    private void jTxtDireccionDuenoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtDireccionDuenoActionPerformed
        // TODO add your handling code here:
        jFTxtNumeroTelefono.requestFocus();
    }//GEN-LAST:event_jTxtDireccionDuenoActionPerformed

    private void jFTxtNumeroTelefonoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFTxtNumeroTelefonoActionPerformed
        // TODO add your handling code here:
        jBtnAnadirNuevoDueno.doClick();
    }//GEN-LAST:event_jFTxtNumeroTelefonoActionPerformed

    private void jBtnElegirDuenoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnElegirDuenoActionPerformed
        // TODO add your handling code here:
        if (jListDueno.getSelectedIndex() != -1) {
            dueno = jListDueno.getSelectedValue();
            jFTxtNumeroCedula.setText(dueno.getCedula());
            jTxtNombreDueno.setText(dueno.getNombre());
            jTxtDireccionDueno.setText(dueno.getDireccion());
            jFTxtNumeroTelefono.setText(dueno.getTelefono());
            accionesDefinirDueño();
        }
        else{
            JOptionPane.showMessageDialog(null, "Debes elegir un dueño de la lista", "Dueño no elegido", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_jBtnElegirDuenoActionPerformed

    private void jBtnLimpiarDuenoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnLimpiarDuenoActionPerformed
        // TODO add your handling code here:
        jFTxtNumeroCedula.setText("");
        jTxtNombreDueno.setText("");
        jTxtDireccionDueno.setText("");
        jFTxtNumeroTelefono.setText("");
        modeloListaDuenos.clear();
        modeloListaDuenos.addAll(arrayDueños);
        jLblDuenoElegido.setText("Dueño no elegido");
        dueno = null;
        if (jBtnLimpiarDueno.getText().equals("Cambiar dueño")) {
            jBtnLimpiarDueno.setText("Limpiar");
            cambiarEstadoEspaciosDueno(true);
        }
    }//GEN-LAST:event_jBtnLimpiarDuenoActionPerformed

    private void jBtnAnadirNuevoPacienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnAnadirNuevoPacienteActionPerformed
        // TODO add your handling code here:
        if (dueno != null) {

            String nombrePaciente = jTxtNombrePaciente.getText().trim();
            if (nombrePaciente.isBlank()) {
                JOptionPane.showMessageDialog(null, "Debes ingresar el nombre del paciente", "Espacio en blanco", JOptionPane.ERROR_MESSAGE);
            } else {
                Especie especie = (Especie) jCmbEspecie.getSelectedItem();
                Raza raza = (Raza) jCmbRaza.getSelectedItem();
                raza.setEspecieAQuePertenece(especie);
                paciente = new Paciente(nombrePaciente,
                        (Sexo) jCmbSexo.getSelectedItem(),
                        (int) jSprEdad.getValue(),
                        dueno,
                        especie,
                        raza);
                try {
                    Paciente.agregar(paciente);
                    modeloListaPacientes.clear();
                    modeloListaPacientes.addAll(Paciente.consultarPacientesPorDueño(dueno));
                    JOptionPane.showMessageDialog(null, "El paciente fue agreado", "¡Paciente agregado!", JOptionPane.INFORMATION_MESSAGE);
                } catch (SQLException ex) {
                    Logger.getLogger(JInternalProcesoCita.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        } else {
            JOptionPane.showMessageDialog(null, "Primero debes crear o elegir un dueño", "¡Dueño no definido!", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_jBtnAnadirNuevoPacienteActionPerformed

    private void jCmbEspecieActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCmbEspecieActionPerformed
        // TODO add your handling code here:
        if (jCmbEspecie.getSelectedItem() instanceof Perro) {
            jCmbRaza.setModel(new DefaultComboBoxModel(arrayRazasPerros.toArray()));
        }
        else{
            jCmbRaza.setModel(new DefaultComboBoxModel(arrayRazasGatos.toArray()));
        }
    }//GEN-LAST:event_jCmbEspecieActionPerformed

    private void jBtnElegirPacienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnElegirPacienteActionPerformed
        // TODO add your handling code here:
        if (jListPaciente.getSelectedIndex() != -1) {
            paciente = jListPaciente.getSelectedValue();
            jTxtNombrePaciente.setText(paciente.getNombre());
            jSprEdad.setValue(paciente.getEdad());
            jCmbSexo.setSelectedItem(paciente.getSexo());
            if (paciente.getEspecie().getId_especie() == 1) {
                jCmbEspecie.setSelectedIndex(0);
                for (Raza raza : arrayRazasPerros) {
                    if (paciente.getRaza().getId_raza() == raza.getId_raza()) {
                        jCmbRaza.setSelectedItem(raza);
                        break;
                    }
                }
            } else {
                jCmbEspecie.setSelectedIndex(1);
                for (Raza raza : arrayRazasGatos) {
                    if (paciente.getRaza().getId_raza() == raza.getId_raza()) {
                        jCmbRaza.setSelectedItem(raza);
                        break;
                    }
                }
            }
        } else {
            JOptionPane.showMessageDialog(null, "Debes elegir un paciente de la lista", "Paciente no elegido", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_jBtnElegirPacienteActionPerformed

    private void jBtnLimpiarPacienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnLimpiarPacienteActionPerformed
        // TODO add your handling code here:
        jTxtNombrePaciente.setText("");
        jSprEdad.setValue(0);
        jCmbSexo.setSelectedIndex(0);
        jCmbEspecie.setSelectedIndex(0);
        jCmbRaza.setSelectedIndex(0);
        modeloListaPacientes.clear();
    }//GEN-LAST:event_jBtnLimpiarPacienteActionPerformed

    private void accionesDefinirDueño() {
        jLblDuenoElegido.setText("Dueño: " + dueno.getNombre());
        cambiarEstadoEspaciosDueno(false);
        jBtnLimpiarDueno.setText("Cambiar dueño");
        try {
            modeloListaPacientes.clear();
            modeloListaPacientes.addAll(Paciente.consultarPacientesPorDueño(dueno));
        } catch (SQLException ex) {
            Logger.getLogger(JInternalProcesoCita.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBtnAnadirNuevoDueno;
    private javax.swing.JButton jBtnAnadirNuevoPaciente;
    private javax.swing.JButton jBtnElegirDueno;
    private javax.swing.JButton jBtnElegirPaciente;
    private javax.swing.JButton jBtnLimpiarDueno;
    private javax.swing.JButton jBtnLimpiarPaciente;
    private javax.swing.JComboBox<Especie> jCmbEspecie;
    private javax.swing.JComboBox<Raza> jCmbRaza;
    private javax.swing.JComboBox<Sexo> jCmbSexo;
    private javax.swing.JFormattedTextField jFTxtNumeroCedula;
    private javax.swing.JFormattedTextField jFTxtNumeroTelefono;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLblCedula;
    private javax.swing.JLabel jLblDireccion;
    private javax.swing.JLabel jLblDuenoElegido;
    private javax.swing.JLabel jLblDuenos;
    private javax.swing.JLabel jLblEdad;
    private javax.swing.JLabel jLblEdad1;
    private javax.swing.JLabel jLblEspecie;
    private javax.swing.JLabel jLblEspecie1;
    private javax.swing.JLabel jLblNombreDueno;
    private javax.swing.JLabel jLblNombrePaciente;
    private javax.swing.JLabel jLblNumeroTelefono;
    private javax.swing.JLabel jLblPacientes;
    private javax.swing.JLabel jLblSexoPaciente;
    private javax.swing.JList<Dueño> jListDueno;
    private javax.swing.JList<Paciente> jListPaciente;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanelCita;
    private javax.swing.JPanel jPanelDatosPaciente;
    private javax.swing.JPanel jPanelDueno;
    private javax.swing.JPanel jPanelPaciente;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JSpinner jSpinner1;
    private javax.swing.JSpinner jSprEdad;
    private javax.swing.JTabbedPane jTPlProcesoCita;
    private javax.swing.JTextField jTxtDireccionDueno;
    private javax.swing.JTextField jTxtNombreDueno;
    private javax.swing.JTextField jTxtNombrePaciente;
    // End of variables declaration//GEN-END:variables
}
